# 1 тур

## 1
Для чисел $a$, $b$, $c$, які більші за $\frac{1}{\sqrt{6}}$ та задовольняють умову $a^2 + b^2 + c^2 = 1$, довести нерівність:
```math
\frac{1 + a^2}{\sqrt{2a^2 + 3ab - c^2}} + \frac{1 + b^2}{\sqrt{2b^2 + 3bc - a^2}} + \frac{1 + c^2}{\sqrt{2c^2 + 3ca - b^2}} \geq 2(a + b + c).
```
<details><summary>Розв'язання</summary>

Нагадаємо нерівність, яка стверджується для усіх додатних чисел $x$, $y$:

```math
2x - y \leq \frac{x^2}{y} \tag{1}
```
Використовуючи цю нерівність:

```math
ab \leq \frac{a^2 + b^2}{2} \implies 2a^2 + 3ab - c^2 \leq 2a^2 + \frac{3}{2}(a^2 + b^2) - c^2 = \frac{1}{2}(7a^2 + 3b^2 - 2c^2) = \\
= \frac{1}{2}(2(4a^2 + 2b^2 + 2c^2) - (a^2 + b^2 + 6c^2)) \overset{(1)}{\leq} \frac{1}{2}  \frac{(4a^2 + 2b^2 + 2c^2)^2}{a^2 + b^2 + 6c^2} = \frac{2(1 + a^2)^2}{a^2 + b^2 + 6c^2} \implies \\
\frac{1 + a^2}{\sqrt{2a^2 + 3ab - c^2}} \geq \frac{1 + a^2}{\sqrt{\frac{2(1 + a^2)^2}{a^2+b^2+6c^2}}} = \frac{1}{\sqrt{2}} \sqrt{a^2 + b^2 + \underbrace{c^2 + \ldots + c^2}_6} = \\
= 2\sqrt{\frac{a^2 + b^2 + c^2 + \ldots + c^2}{8}} \geq 2 \cdot \frac{a + b + c + \ldots + c}{8} = \frac{a + b + 6c}{4}.
```
Циклічно переставимо змінні й одержимо, що ліва частина заданої нерівності не менше, ніж:
```math
\frac{a + b + 6c}{4} + \frac{a + 6b + c}{4} + \frac{6a + b + c}{4} = 2(a + b + c),
```
Що й треба було довести.
</details>

## 2
У трапеції $ABCD$ з основами $AD$, $BC$ кут між діагоналями прямий. Всередині $ABCD$ існує така точка $M$, відмінна від точки перетину діагоналей, що $\angle AMB = \angle CMD = 90^\circ$. Нехай $P$ – точка перетину бісектрис кутів $\angle A$ і $\angle C$, $Q$ – точка перетину бісектрис кутів $\angle B$ і $\angle D$. Довести, що $\angle PMB = \angle QMC$.

<details><summary>Розв'язання</summary>

Нехай $O$ - точка перетину діагоналей, $h = BB_1 = CC_1$ - висоти трапеції. Тоді $\varphi = \angle OAD = \angle B_1BD$. Точки $A$, $M$, $O$, $B$ - циклічні за умовою ($\angle AMB = \angle AOB = 90^\circ$), тому $\angle MAO = \angle MBO$ і $\angle OCM = \angle MDO$. Отже $\triangle AMC \sim \triangle BMD$, $\triangle BB_1D \sim \triangle CAC_1$, тому маємо такі рівності:
```math
\frac{AM}{BM} = \frac{AC}{BD} = \frac{CC_1}{B_1D} = \frac{BB_1}{B_1D} \implies \triangle AMB \sim \triangle BB_1D \text{ і } \varphi = \angle BAM = \angle CAD.
```
Отже $AP$ - бісектриса $\angle MAC$. Оскільки $\angle MCO = \angle OAD = \angle OCB$, то $CP$ - бісектриса $\angle MCA$, тому $P$ - інцентр $\triangle AMC$ і $\angle PMB =|\frac{1}{2}\angle AMC - \angle BMC|$. Аналогічно $\angle QMC =|\frac{1}{2}\angle BMD - \angle BMC|$, отже вони рівні, що й треба було довести.
</details>

## 3
$k$, $n$ – такі натуральні числа, що задовольняють умову: $k + 1 \leq \sqrt{\frac{n + 1}{\ln(n + 1)}}$. Доведіть, що існує многочлен $P(x)$ степеня $n$ з коефіцієнтами $1$, $0$, $-1$, який ділиться на $(x - 1)^k$ без остачі.

<details><summary>Розв'язання</summary>

Розглянемо множину $M = \{a_n x^n + a_{n-1} x^{n-1} + \ldots + a_1 x + a_0 \mid a_i \in \{0, 1\}, i = 0, 1, \ldots, n\}$.

Позначимо $\forall f \in M$ множину $\Psi(f) = (f(1), f'(1), \ldots, f^{(k-1)}(1))$. Множина $M$ має потужність (кількість елементів) $2^{n+1}$. Для кожної функції $f \in M$ вектор $\Psi(f)$ є цілою точкою в паралелепіпеді $\Pi = [0, 1] \times [0, n^2] \times \ldots \times [0, n^k]$. Цей паралелепіпед містить $(n+1)^\frac{k(k+1)}{2} < (n+1)^{\frac{(k+1)^2}{2}}$ цілу точку. З умови задачі $2^{n+1} > (n+1)^{\frac{(k+1)^2}{2}}$, тому існують такі $f_1 \neq f_2$ з множини $M$, що $\Psi(f_1) = \Psi(f_2)$. Покладемо $P(x) = f_1(x) - f_2(x)$. Зрозуміло, що його степінь не перевищує $n$, усі його коефіцієнти з множини $\{-1, 0, 1\}$, і $P(1) = P'(1) = \ldots = P^{(k-1)}(1) = 0$. Останнє означає, що $P(x) \mathop{\raisebox{-2pt}{\vdots}} (x-1)^k$. Якщо степінь многочлена $P(x)$ менша за $n$, то достатньо його домножити на $x$ в деякій степені.
</details>

# 2 тур

## 4
Знайти усі такі функції $f : \mathbb{Q} \implies \mathbb{Q}$, що для будь-яких раціональних $x$, $y$ справджується рівність:
```math
f(x^2 + y + f(xy)) = 3 + (x + f(y) - 2)f(x).
```
<details><summary>Відповідь</summary>

$f(x) = x + 1$
<details><summary>Розв'язання</summary>

Нехай $f(0) = w$. Підставимо по черзі $x = 0$ і $y = 0$:
```math
f(y + w) = 3 + w(f(y) - 2) \tag{1}
```
```math
f(x^2 + w) = 3 + (x + w - 2)f(x) \tag{2}
```
Підставимо в (1) $y = x^2$:
```math
f(x^2 + w) = 3 + w(f(x^2) - 2) \tag{3}
```
Розглянемо різницю (2)-(3):
```math
w(f(x^2) - 2) = (x + w - 2)f(x) \tag{4}
```
Ліва частина (4) є парною функцією, а тому й права частина рівності однакова для $x = \pm w$: $(w + w - 2)f(w) = (-w + w - 2)f(-w)$ або
```math
f(-w) = (1 - w)f(w) \tag{5}
```
Підставимо в (1) $y = w$:
```math
w = 3 + w(f(-w) - 2) \tag{6},
```
далі в (6) підставимо вираз $f(-w)$ з (5):
```math
w = 3 + w((1 - w)f(w) - 2) \tag{7}
```
В (2) підставивши $x = 0$, одержимо $f(w) = 3 + w(w - 2)$, останнє підставимо в (7): $w = 3 + w((1 - w)(3 + w(w - 2)) - 2)$ - рівняння для знаходження $w$, після перетворень воно набуває такого вигляду: $w^4 -  3w^3 + 5w^2 - 3 = 0$. Останнє рівняння має єдиний раціональний корінь $w = 1$. З урахуванням цього перепишемо співвідношення (1) і (4):
```math
f(y + 1) = 1 + f(y) \tag{1.1}
```
```math
f(x^2) -2 = (x-1)f(x) \tag{4.1}
```
В останній рівності підставимо $(-x)$ і прирівняємо ліві частини: $(x-1)f(x) = (-x-1)f(-x) \implies$ при $x \neq -1$
```math
f(-x) = \frac{1-x}{1 + x}f(x) \tag{8}
```
В (8) замінимо $x$ на $(x+1)$, тоді при $x \ne 2$:
```math
f(-x-1) = \frac{-x}{2 + x}f(x+1) \tag{9}
```
З рівності (1.1) маємо: $f(-x) = 1 + f(-x - 1) \implies f(-x - 1) = f(-x) - 1$. Тоді підставимо це в (9):
```math
f(-x-1) = f(-x) - 1 = \frac{-x}{2 + x}f(x+1) = \frac{-x}{2 + x}(f(x)+1) \implies f(-x) = 1 + \frac{-x}{2+x}(f(x) + 1) \overset{(8)}{=} \frac{1-x}{1+x}f(x),
```
при $x \ne -1, -2$. Останнє є рівнянням для f(x). Після перетворень знаходимо, що $f(x)=x+1$. Із співвідношення (1.1) переконаємось, що воно справджується також і для $x=-1, -2$. Остаточною перевіркою, підставляючи цей розв’язок $f(x) = x+1$  у початкове рівняння, пересвідчуємось, що це і є шуканим розв’язком.
</details></details>

## 5
В гострокутному трикутнику $ABC$ висоти $AA_3$, $BB_3$ перетинають описане коло в точках $A_1$, $B_1$ відповідно. На прямих $BC$ і $CA$ обрано точки $A_2$ та $B_2$ відповідно таким чином, що пряма $B_1B_2$ паралельна прямій $BC$ і пряма $A_1A_2$ паралельна прямій $AC$. Нехай $M$ – середина відрізку $A_2B_2$. Знайти кут $\angle B_3MA_3$, якщо кут $\angle ACB = \gamma$.
<details><summary>Відповідь</summary>

$2\gamma$
<details><summary>Розв'язання</summary>

Позначимо сторони та кути трикутника $ABC$ через $a$, $b$, $c$ і $\alpha$, $\beta$, $\gamma$, радіус описаного кола – $R$. Проведемо відрізки $A_1C$, $CB_1$, а також виберемо на стороні $AC$ точку $K$ таким чином, щоб відрізок $A_2K \parallel A_1C$. Доведемо, що $B_2B_3 = KB_3$.

За умовами задачі легко знайти: $\angle CA_2A_1 = \angle CB_2B_1 = \gamma$, $\angle CB_1B = \alpha$, $\angle AA_1C = \beta$. Обчислимо потрібні нам відрізки: $CB_3 = a \cos \gamma = 2R \sin \alpha \cos \gamma$, $B_1B_3 = B_3C \cdot \ctg \alpha = 2R \cos \alpha \cos \gamma$, $B_2B_3 = B_1B_3 \cdot \ctg \gamma = 2R \cos \alpha \cos \gamma \cdot \ctg^2 \gamma$, $CB_2 = a \cos \gamma (1 + \ctg^2 \gamma \cdot \ctg \alpha) = 2R \ctg \gamma \cos(\gamma - \alpha)$, аналогічно $CA_2 = 2R \cdot \ctg \gamma \cos(\gamma - \beta)$. $\angle CA_2K = \frac{\pi}{2} - \beta$, $\angle CKA_2 = \frac{\pi}{2} - \gamma + \beta$. За теоремою синусів для $\triangle CKA_2$:
```math
\frac{A_2C}{\sin(\frac{\pi}{2} - \gamma + \beta)} = \frac{CK}{\sin(\frac{\pi}{2} - \beta)} \implies CK = A_2C \frac{\cos \beta}{\cos(\gamma - \beta)} = 2R \cos \beta \cdot \ctg \gamma.
```
Тоді $KB_2 = CB_2 - CK = 2R \cdot \ctg \gamma (\cos(\gamma - \alpha) - \cos \beta)$, $KB_3 = CB_3 - CK = 2R \sin \alpha \cos \gamma - 2R \cos \beta \cdot \ctg \gamma = 2R \cdot \ctg \gamma (\sin \alpha \sin \gamma - \cos \beta)$, оскільки $\sin \gamma \sin \alpha - \cos \beta = \frac{1}{2} \cos (\gamma - \alpha) - \frac{1}{2} \cos(\gamma + \alpha) - \cos\beta = \frac{1}{2} \cos (\gamma - \alpha) - \frac{1}{2} \cos (\pi - \beta) - \cos\beta = \frac{1}{2} (\cos (\gamma - \alpha) - \cos \beta)$, то $KB_3 = \frac{1}{2} B_2B_3$, то $B_2B_3 = KB_3$. Таким чином, $MB_3$ – середня лінія $\triangle B_2A_2K$, а тому $MB_3 \parallel A_1C$.

Повністю аналогічно доводиться, що $MA_3 \parallel B_1C$, а тому $\angle A_3MB_3 = \angle A_1CB_1 = 2\gamma$.
</details></details>

## 6
Назвемо просте число $p$ «кубічним», якщо кожне ціле число можна подати у вигляді $x^3 + y^3 + pz$, де $x$, $y$, $z$ також цілі числа. Знайти усі «кубічні» прості числа.
<details><summary>Відповідь</summary>

Усі прості числа, окрім $p=7$.
<details><summary>Розв'язання</summary>

Нехай $p$ — фіксоване "**некубічне**" число, це означає, що існують числа $\alpha \in \mathbb{Z} : \alpha \neq x^3 + y^3 \pmod p$. Назвемо усі лишки (вичети) з такою властивістю "**поганими**", а решту — "**гарними**". Нехай $m$ — кількість ненульових лишків $a$ таких, що $a \equiv x^3 \pmod{p}$, тоді $m \geq \frac{p-1}{3}$. Справді, якщо $x^3 \equiv a^3 \pmod{p}$ для різних $a \neq x$, то $(x - a)(x^2 - ax + a^2) \equiv 0 \pmod{p}$ або $(x^2-ax+a^2) \equiv 0 \pmod{p}$. Останнє рівняння має не більше двох коренів у системі лишків, тобто для $a$ є більше трьох подань $a \equiv x^3 \pmod{p}$. Тому серед $1^3, 2^3, \ldots, (p-1)^3$ є принаймні $\frac{p-1}{3}$ різних.

Оскільки, якщо $\alpha$ — погане (гарне), то й $\alpha n^3 \pmod{p}$ при $n \not \equiv 0 \pmod{p}$ також погане (гарне) (якщо $\alpha \equiv x^3 + y^3$, то $n^3 \alpha \equiv (xn)^3 + (yn)^3$). Тому, якщо $\alpha$ — погане, то $\alpha \cdot 1^3, \alpha \cdot 2^3, \ldots, \alpha \cdot (p-1)^3$ — погані, тобто поганих лишків не менше, ніж $m \geq \frac{p-1}{3}$.

Для лишка $a$ покладемо:
```math
\left( \frac{a}{p} \right) = 
\begin{cases} 
0, & a \equiv 0 \pmod{p} \\
1, & a \not\equiv 0 \pmod{p}, a \equiv x^2 \pmod{p} \\
-1, & \text{\it{усіх інших випадках}}
\end{cases}
```
де $\left( \frac{\bullet}{p} \right)$ - символ Лежандра.

Декілька простих властивостей.

1. $\left( \frac{ab}{p} \right) = \left( \frac{a}{p} \right) \left( \frac{b}{p} \right)$,
2. якщо $\left( \frac{a}{p} \right) = 1$, то $a$ називається квадратичним лишком і лишків та нелишків рівна кількість: $\frac{p-1}{2}$.

**Лема**. Нехай $\alpha_1, \alpha_2 \in \{ \pm 1 \}$, $a \not\equiv 0 \pmod{p}$, $b \equiv 0 \pmod{p}$, тоді кількість розв'язків системи
```math
\begin{cases}
\left( \frac{x}{p} \right) = \alpha_1 \\
\left( \frac{ak+b}{p} \right) = \alpha_2 
\end{cases}
```
не перевищує $\frac{p+3}{4}$.
<details><summary>Доведення</summary>

Якщо $k \neq 0$, то існує єдине $k^{-1}$: $k \cdot k^{-1} \equiv 1 \pmod{p}$ – очевидно. З властивості маємо $\left( \frac{ak+b}{p} \right) = \left( \frac{a}{p} \right) \left( \frac{x+ba^-1}{p} \right)$, а, тому система еквівалентна $\begin{cases} \left( \frac{x}{p} \right) = \alpha_1 \\ \left( \frac{x+ba^-1}{p} \right) = \alpha_2 \left( \frac{a}{p} \right) \end{cases}$. Розглянемо суму $A = \sum_{j=0}^{p-1} \left( \left(\frac{j}{p}\right) + \alpha_1 \right)\left(\left( \frac{j+b}{p}\right) + \alpha_2 \right)$, кожний доданок рівний $4\alpha_1 \alpha_2$, якщо $j$ – розв'язок системи і нуль в усіх інших випадках, окрім $j = 0$ (тоді $\alpha_1 \left(\left(\frac{b}{p}\right) + \alpha_2\right)$) і $j=p-b$ (тоді $\alpha_2 \left(\alpha_1 + \left(\frac{-b}{p}\right) \right)$), тобто
```math
A = 4 \alpha_1 \alpha_2 n + \alpha_1 \left( \left( \frac{b}{p} \right) + \alpha_2 \right) + \alpha_2 \left(\left( \frac{-b}{p}\right) + \alpha_1 \right).
```
З іншого боку $A = \sum_{j=0}^{p-1} \left( \frac{j}{p} \right) \left( \frac{j+b}{p} \right) + \alpha_1 \sum_{j=0}^{p-1} \left( \frac{j+b}{p} \right) + \alpha_2 \sum_{j=0}^{p-1} \left( \frac{j}{p} \right) + p\alpha_1 \alpha_2$. Але за властивістю
1. $\sum_{j=0}^{p-1} \left( \frac{j}{p} \right) = \sum_{j=0}^{p-1} \left( \frac{j+b}{p} \right) = 0$,
2. $\sum_{j=0}^{p-1} \left( \frac{j}{p} \right)\left( \frac{j+b}{p} \right) = \sum_{j=0}^{p-1} \left( \frac{j^2+jb}{p} \right) = \sum_{j=1}^{p-1} \left( \frac{j^2+jb}{p} \right) = \sum_{j=1}^{p-1} \left( \frac{(j^{-1})^2}{p} \right) \left( \frac{j^2+jb}{p} \right) = \sum_{j=1}^{p-1} \left( \frac{1+bj^{-1}}{p} \right)$

якщо $j$ пробігає значення $1,\ldots,p-1$, то $j^{-1}$ пробігає значення $1,\ldots,p-1$, і $1 + bj^{-1}$ пробігає значення $0, 2,\ldots, p-1$ тобто $\sum_{i=1}^{p-1} \left( \frac{i}{p} \right) - \left( \frac{1}{p} \right) = -1$, з урахуванням 2., і того, що $\left|\left( \frac{k}{p} \right)\right|\leq 1$ одержимо потрібне. $\blacksquare$
</details>

Нехай $X$ – множина поганих лишків, якщо $m \in X$, то $6^{-1}(m-2)$ і $(-6)^{-1}(m+2)$ – квадратні нелишки. (Тут і далі ми вважаємо, що $p > 3$, випадок $p = 2, 3$ перевіряємо безпосередньо і знаходимо, що ці числа кубічні). Дійсно, якщо $6^{-1}(m-2) \equiv x^2$, то $m \equiv 6x^2 + 2 = (x+1)^3 + (1-x)^3$ – суперечність, так само, якщо $(-6)^{-1}(m+2) \equiv x^2$, то $\equiv = -2 -6x^2 = (x-1)^3 + (-1-x)^3$ – суперечність.

Нехай $Y = \{6^{-1}(a-2)|a \in X\}$, тоді усі елементи з $Y$ нелишки, і якщо $y \in Y$, то $(-y + 4 \cdot 6^{-1})$ також нелишок (якщо $y \in Y$, то $y \equiv 6^{-1}(a-2)$, і $(-y + 4 \cdot 6^{-1}) \equiv  (-6)^{-1}(a+2)$ також нелишок). Таким чином усі з $Y$ розв'язки системи з $a = -1$ і $b = 4 \cdot 6^{-1} \not\equiv 0$, тобто $|Y|=|X|\leq \frac{p+3}{4}$, але раніше ми показали, що $|X|\geq \frac{p-1}{3}$, тобто $\frac{p-1}{3}\leq \frac{p+3}{4}$. Усі прості до 13 перевіряємо безпосередньо, тільки $p=7$ не кубічне.
</details></details>

# 3 тур
## 7
Є 25 людей, кожні двоє з яких спілкуються деякою мовою. Причому будь-які двоє людей спілкуються між собою тільки однією мовою, навіть якщо вони знають і інші спільні мови. Відомо, що серед будь-яких трьох людей знайдеться принаймні одна людина, яка спілкується з двома іншими з цих трьох однією й тією ж самою мовою. Доведіть, що знайдеться людина, яка спілкується однією й тією ж самою мовою з деякими 10 іншими людьми.
<details><summary>Розв'язання</summary>

Позначимо людей вершинами графа. Кожній мові поставимо у відповідність деякий свій колір і цим кольором з’єднаємо пари людей, які спілкуються між собою саме цією мовою. Для нашого графу виконується умова, що серед будь-яких трьох вершин знайдеться принаймні дві пари (вони, звісно, мають спільну вершину), які сполучені ребрами одного й того самого кольору. Цю умову будемо називати _умовою рівнобедреності_.

Будемо називати наш граф _зв’язним за даним кольором_, якщо він залишиться зв’язним, коли залишити у ньому тільки ребра цього кольору. Доведемо, що граф, який містить більше однієї вершини та задовольняє умову рівнобедреності, не може бути зв’язним більше, ніж за двома кольорами. Використаємо індукцію за кількістю вершин графа.


<details><summary>Доведення</summary>

_База індукції_. Граф з двома вершинами є зв’язним лише за одним кольором.

_Крок індукції_.Нехай для графа з $k$ ($k \geq 2$) вершинами твердження вірне. Припустимо, що існує граф з $k + 1$ вершиною, який задовольняє умову рівнобедреності і є зв’язним принаймні за трьома кольорами, які ми позначимо через $X$, $Y$, $Z$. Розглянемо граф, який отримується з даного вилученням деякої вершини $W$ та прилеглих до неї ребер. Він теж задовольняє умову рівнобедреності, тому за припущенням індукції цей граф не є зв’язним за одним з трьох вищезгаданих кольорів. Саме цей колір позначимо через $Z$. У вищерозглянутому графі залишимо лише ребра кольору $Z$ і позначимо отриманий граф через $G_k$.

Нехай $A_1,A_2,\dots,A_m$ – зв’язні компоненти у графі $G_k$, в якому залишили тільки ребра кольору $Z$. За вибором кольору $Z$, маємо, що $m \geq 1$. Покажемо, що для будь-яких двох компонент $A_i$ та $A_j$ ($i \neq j$) існує пари вершин, одна з яких належить $A_i$, а друга – $A_j$, з’єднані ребрами одного й того самого кольору. Нехай вершини $K, L \in A_i$, а вершини $M,N \in A_j$. Через $(XY)$ будемо позначати колір ребра, яке сполучає вершини $X$ та $Y$. Достатньо довести, що для будь-яких вершин $K,L \in A_i$ та $M,N \in A_j$ виконується умова $(KM) = (LN)$.

За побудовою $A_i$ та $A_j$, знайдуться послідовності вершин: $\{K_0 = K, K_1, \ldots, K_p = L\}$, $\{M_0 = M,M_1,\ldots,M_q = N\}$ для яких 
```math
(K_0 K_1) = (K_1 K_2) = \ldots = (K_{p-1} K_p) = (M_0 M_1) = (M_1 M_2) = \ldots = (M_{q-1} M_q) = Z.
```
(Подальші міркування будуть залишатися вірними, навіть якщо $p$ або $q$ дорівнює нулю, тому ці випадки можна окремо не розглядати). Для будь-якого натурального $i \in \{0, 1, \ldots, p-1\}$, за умовою рівнобедреності, серед кольорів $(K_i K_{i+1})$, $(K_i M)$ та $(K_{i+1} M)$ знайдуться два однакових. Але, оскільки $K_i$ та $K_{i+1}$ містяться у різних компонентах зв’язності графа $G_k$, кольори $(K_i M)$ та $(K_{i+1} M)$ не можуть дорівнювати $Z$. На відміну від них, $(K_i K_{i+1}) = Z$. Отже, рівними можуть бути лише кольори $(K_i M)$ та $(K_i M)$. З цього витікає $(KM) = (K_0 M) = (K_1 M) = \ldots = (K_p M) = (LM)$. Аналогічно доводиться $(LM) = (LN)$. Отже, для довільних вершин $K, L \in A_i$ та $M, N \in A_j$ доведено $(KM) = (LM) = (LN)$.

Згідно з вищевдоведеним, через $[A_i, A_{i+1}] (i \neq j)$ можна позначити той єдиний колір, який мають ребра, що сполучають пари вершин, одна з яких належить $A_i$, а друга – $A_j$.

Оскільки ми припустили, що наш граф з $k + 1$ вершиною є зв’язним за кольорами $X$, $Y$, $Z$, то з вершини $W$ має виходити ребро кольору $X$, ребро кольору $Y$, та до кожної компоненти серед $A_1, A_2, \dots, A_m$ — ребро кольору $Z$.

Нехай $R$, $S$ — такі вершини, для яких $(WR) = X$, $(WS) = Y$. Нехай $R \in A_r$, $S \in A_s$. Для будь-якої компоненти $A_t \neq A_r$, буде виконуватися $[A_t, A_r] = X$. Дійсно, нехай $T$ — вершина у $A_t$, для якої $(WT) = Z$. За умовою рівнобедреності, серед кольорів $(WT)$, $(WR)$, $(RT)$ знайдуться два однакових. Але $(WR) = X \neq Z = (WT)$ та $(RT) = [A_t, A_r] \neq Z = (WT)$, тому $(RT) = (WR) = X$. А звідси: $[A_t, A_r] = (RT) = X$. Аналогічно доводиться, що будь-якій компоненті $A_t$, відмінній від $A_s$, буде виконуватися $[A_t, A_s] = Y$.

Але тоді, якщо $r \neq s$, то для $t = s$ маємо $[A_s, A_r] = X$, а для $t = r$ маємо $[A_r, A_s] = Y$. Але цього не може бути, бо $[A_r, A_s] = [A_s, A_r]$. Якщо ж $r = s$, то з умови $m \geq 2$ отримуємо, що існує $t$, відмінне від $r$ та $s$. А тоді повинно бути $[A_t, A_r] = X$, та $[A_t, A_s] = Y$, що неможливо внаслідок $[A_r, A_s] = [A_s, A_r]$.

Твердження індукцією доведено. $\blacksquare$
</details>

Нехай у нашому графі є ребра не менше, ніж трьох кольорів. У протилежному випадку кожна вершина графа з'єднана деяким одним кольором принаймні з 12 іншими. Отже, існує колір, який представлений у графі та за яким граф не є зв'язним.

Нехай є хоча б два кольори (серед представлених), за яким граф не є зв'язним. Позначимо їх $Y$ та $Z$. Розглянемо всі зв'язані компоненти відносно ребер кольору $Y$, які позначимо як $B_1, B_2, \dots, B_g$. Доведемо, що якщо перефарбувати усі ребра кольору $Y$ у колір $Z$, то граф не стане зв'язним за кольором $Z$.

Якщо для деякої компоненти $B_n$ не існує такої іншої компоненти $B_t$, для якої $[B_r, B_t] = Z$, то і при перефарбуванні $B_r$ не буде зв'язана ребрами кольору $Z$ з іншими вершинами графа. Нехай тепер для кожної компоненти $B_r$ знайдеться потрібна $B_t$. Тоді якщо вершини $U$ та $V$ з'єднані ребром кольору $Y$, то вони належать одній компоненті зв'язності за кольором $Y$. Нехай є компонента $B_s$. Тоді за вибором випадку для неї знайдеться компонента $A_t$, для якої $[B_r, B_s] = Z$. Нехай вершина $W$ належить $B_t$. Тоді $(UW) = (WV) = [B_s, B_t] = Z$. А отже всі пари вершин, які можна з'єднати ланцюжком з ребер кольору $Y$ або $Z$, можна з'єднати і ланцюжком з ребер тільки кольору $Z$, замінюючи ребра кольору $Y$ на пари послідовних ребер кольору $Z$ вищезгаданим способом. Отже, якщо граф стане зв'язним за кольором $Z$ після перефарбування, то має бути зв'язним і до перефарбування, чого немає.

Також помітимо, що при перефарбуванні умова рівнобедреності зберігається, оскільки однакові ребра залишаються однаковими. Тому перефарбування можна продовжувати, поки не залишиться тільки один колір, за яким граф не буде зв'язним.

Нехай залишився лише один колір $D$, за яким граф не є зв'язним. Нехай $C_1, C_2, \dots, C_h$ - компоненти зв'язності відносно кольору $D$. Оскільки за всіма іншими кольорами граф є зв'язним, то таких кольорів не більше двох.

Якщо $h \geq 5$, то розглянемо найменшу кількість таких компонент. Тоді кожна вершина з'єднана не менше, ніж з 20 вершинами за допомогою ребер не більше, ніж двох кольорів. Отже знайдеться колір, яким вершина з'єднана не менш, ніж з 10 іншими. Якщо $h < 5$, то твердження доводиться невеликим перефарбуванням відразу для значень $[C_i, C_j]$ ($i \neq j$).

Причому для будь-якого $h$ доведено, що потрібний колір знайдеться серед тих кольорів, за якими вершина з'єднана не менш, ніж з 10 іншими вершинами ребра, отже потрібний колір і тоді знайдеться серед тих кольорів, тобто для початкового графа.
</details>

## 8
Нехай многочлен $f(x) = x^4 + a_1 x^3 + a_2 x^2 + a_3 x + a_4$ з дійсними коефіцієнтами має локальний максимум $M$ та абсолютний мінімум $m$. Доведіть, що
```math
\frac{3}{10} \left( \frac{a_1^2}{4} - \frac{2a_2}{3} \right)^2 < M - m < 3 \left( \frac{a_1^2}{4} - \frac{2a_2}{3} \right)^2.
```
<details><summary>Розв'язання</summary>

Нехай $f(a) = m_1, f(b) = m_2, a < b$ – точки локального мінімуму. $f(c) = M, a < c < b$ – точка локального максимуму.

Спочатку знайдемо найбільше та найменше значення функції $M - m$ в залежності від фіксованого $d = b - a$. Паралельний перенос не змінює різницю $M - m$, тому ми можемо припустити, без обмеження загальності, $a = m_1 = 0, b = d$. З припущення легко отримати вигляд похідної його полінома та й самого полінома: $f'(x) = 4x(x - c)(x - d)$, $f(x) = x^4 - \frac{4}{3}(c + d)x^3 + 2cdx^2$. Тоді $f(c) = -\frac{1}{3}c^4 + \frac{2}{3}c^3d$ є локальним максимумом, і $f(d) = -\frac{1}{3}d^4 + \frac{2}{3}d^3c, f(0) = 0$ – два локальних максимуми. 

Стандартне дослідження показує, що вираз $\Delta_1 = f(c) - f(0)$ зростає, а вираз $\Delta_2 = f(c) - f(d)$ спадає при зростанні параметра $c$ в межах від 0 до $d$. Тому $\Delta_1 = f(c) - f(0)$ досягає найбільшого значення при $c = d$ і $\Delta_2 = f(c) - f(d)$ досягає найбільшого значення при $c = 0$. В обох випадках це значення дорівнює $\frac{1}{3}d^4$, якщо $c = \frac{1}{2}d, f(c) = \frac{1}{16}d^4$ і $f(0) = f(d) = 0, \Delta_1 = \Delta_2 = \frac{1}{16}d^4$ – це найменше можливе значення різниці $M - m$, бо в іншому випадку або $\Delta_1$, або $\Delta_2$ більші за $\frac{1}{16}d^4$. Отже ми довели, що
```math
\frac{1}{16}d^4 \leq M - m \leq \frac{1}{3}d^4. \tag{1}
```
Оцінимо значення $d$. Це є відстань між найвіддаленішими коренями полінома $f'(x) = 4x^3 + 3a_1x^2 + 2a_2x + a_3$, при умові, що цей поліном має три різних корені. Нехай $D$ – це відстань між точками екстремумів цього полінома. Вона дорівнює відстані між коренями полінома $f''(x) = 12x^2 + 6a_1x + 2a_2$, тому
```math
D = \sqrt{\frac{1}{4}a_1^2 - \frac{2}{3}a_2}. \tag{2}
```
Відмітимо, що $\frac{1}{4}a_1^2 - \frac{2}{3}a_2 > 0$, бо в протилежному випадку поліном $f(x)$ не може мати локальний максимум. Графік полінома $g(x) = 4x^3 - 3D^2x$ можна отримати паралельним переносом графіка полінома $f'(x) = 4x^3 + 3a_1x^2 + 2a_2x + a_3$, бо $g(x)$ має ту ж саму відстань $D$ між екстремумами і той самий старший коефіцієнт 4. Відстань між найвіддаленішими коренями рівняння $g(x) = c$ спадає при зростанні модуля $c$ доти, поки рівняння має 3 різні корені. Максимальна відстань є $\sqrt{3}D$ і досягається при $c = 0$, найменша відстань складає $\frac{3}{2}D$ і досягається при $c = \pm D^3$. А це й означає, що $f'(x) = 4x^3 + 3a_1x^2 + 2a_2x + a_3$ має три дійсних корені, коли відстань між найвіддаленішими з них задовольняє нерівності: $\frac{3}{2} < D \leq \sqrt[3]{D}$. З співвідношень (1) і (2) отримуємо остаточно:
```math
\frac{3}{10} \left( \frac{1}{4}a_1^2 - \frac{2}{3}a_2 \right)^2 < \frac{81}{256} \left( \frac{1}{4}a_1^2 - \frac{2}{3}a_2 \right)^2 < M - m < 3 \left( \frac{1}{4}a_1^2 - \frac{2}{3}a_2 \right)^2.
```
</details>

## 9
Точки $A_1$, $B_1$, $C_1$ обрані на сторонах $BC$, $CA$, $AB$ трикутника $ABC$ відповідно. Кола, що описані навколо трикутників $AB_1C_1$, $BC_1A_1$, $CA_1B_1$ перетинають описане навколо трикутника $ABC$ коло в точках $A_2$, $B_2$, $C_2$ відповідно ($A_2 \neq A$, $B_2 \neq B_1$, $C_2 \neq C_1$). Точки $A_3$, $B_3$, $C_3$ є симетричними точкам $A_1$, $B_1$, $C_1$ відносно середини сторін $BC$, $CA$, $AB$ відповідно. Довести, що трикутники $A_2B_2C_2$, $A_3B_3C_3$ є подібними.

<details><summary>Розв'язання</summary>

Ми будемо розв’язувати задачу за допомогою орієнтованих кутів між прямими. Для двох прямих ліній $l$, $m$ на площині через $\angle(l, m)$ позначимо кут проти руху годинникової стрілки, який перетворює лінію $l$ в пряму, яка паралельна прямій $m$. Це є число зі знаком, величини, що відрізняються на число кратне $\pi$ рівні, так що
```math
\angle(l, m) = -\angle(m, l), \angle(l, m) + \angle(m, n) = \angle(l, n).
```
Якщо пряма $l = KL$, $m = MN$, будемо записувати $\angle(KL, MN)$ замість $\angle(l, m)$, букви $K$, $L$ вільні міняються, так само, як і $M$, $N$.

Нагадаємо аналог класичної теореми про циклічний чотирикутник: якщо $K$, $L$, $M$, $N$ – чотири неколіенарні точки на площині, то $K$, $L$, $M$, $N$ – циклічні (лежать на одному колі) тоді і тільки тоді, коли
```math
\angle(KM, LM) = \angle(KN, LN). \tag{1}
```
Якщо точно зробити рисунок, то бачимо, що три кола $(AB_1C_1)$, $(A_1BC_1)$, $(A_1B_1C)$ мають спільну точку. Нехай $(AB_1C_1)$ і $(A_1BC_1)$ перетинаються в точках $C_1$ і $P$. Тоді згідно (1): $\angle (PA_1, CA_1) = \angle (PA_1, BA_1) = \angle (PC_1, BC_1) = \angle (PC_1, AC_1) = \angle (PB_1, AB_1) = \angle (PB_1, CB_1)$. Позначимо цей кут $\varphi$.

З наведених рівностей між кутами бачимо, що точки $A_1$, $B_1$, $P$, $C$ – циклічні. Таким чином точка $P$ – спільна для трьох наведених кіл.

З основної властивості (1) далі без детального розписування ми одержимо таке.
```math
\varphi = \angle (PA_1, BC) = \angle (PB_1, CA) = \angle (PC_1, AB). \tag{2}
```
Нехай прямі $A_2P$, $B_2P$, $C_2P$ перетинають коло $(ABC)$ в точках $A_4$, $B_4$, $C_4$ відповідно. Тоді $\angle(A_4A_2, AA_2) = \angle(PA_2, AA_2) = \angle(PC_1, AC_1) = \angle(PC_1, AB) = \varphi$ ми бачимо, що пряма $AA_2$ є образом прямої $A_2A_4$ при обертанні навколо $A_2$ на кут $\varphi$. Таким чином точка $A$ є образом точки $A_4$ при обертанні на кут $2\varphi$ навколо точки $O$ – центр кола $(ABC)$. Аналогічне обертання ставить у відповідність $B_4$ до $B$ і $C_4$ до $C$. Тобто трикутник $ABC$ є образом трикутника $A_4B_4C_4$ при цьому відображенні. Таким чином:
```math
\angle(A_4B_4, AB) = \angle(B_4C_4, BC) = \angle(C_4A_4, CA) = 2\varphi. \tag{3}
```
Оскільки обертання на $2\varphi$ навколо $O$ переводить точку $B_4$ в $B$ ми маємо $\angle(AB_4, AB) = \varphi$. Відповідно до (2) маємо:
$\angle (AB_4, PC_1) = \angle (AB_4, AB) + \angle (AB, PC_1) = \varphi + (-\varphi) = 0$, що означає паралельність $AB_4 \parallel PC_1$.

Нехай $C_5 = PC_1 \cap A_4B_4$, аналогічно задаються й точки $A_5$, $B_5$. Так $AB_4 \parallel C_1C_5$, додаючи сюди (2) та (3) маємо:
```math
\angle (A_4B_4, PC_1) = \angle (A_4B_4, AB) + \angle (AB, PC_1) = 2\varphi + (-\varphi) = \varphi. \tag{4}
```
Тобто $\angle (B_4C_5, C_5C_1) = \varphi \implies \angle (C_5C_1, C_1A) = \angle (PC_1, AB) = \varphi$ (дивись (2)), тому чотирикутник $AB_4C_5C_1$ є рівнобічною трапецією з $AC_1 = B_4C_5$.

Міняючи місцями точки $A$ і $B$, ми одержимо, що $BC_1 = A_4C_5$. І, оскільки, $AC_1 + BC_1 = AB = A_4B_4$, звідки витікає, що точка $C_5$ лежить на відрізку $A_4B_4$ та ділить його на відрізки $A_4C_5$ та $B_4C_5$, при цьому $A_4C_5 = BC_1 = AC_3$, $B_4C_5 = AC_1 = BC_3$. Іншими словами, обертання, що задає відображення перетворення $\triangle A_4B_4C_4$ в $\triangle ABC$ переводить $C_5$ в $C_3$. Аналогічно відображаються $A_5$ в $A_3$ та $B_5$ в $B_3$. Таким чином трикутники $A_3B_3C_3$ та $A_5B_5C_5$ – рівні. Залишається показати, що вони подібні до трикутника $A_2B_2C_2$.

Прямі $B_4C_5$, $PC_5$ співпадають відповідно з прямими $A_4B_4$, $PC_1$, з (4) маємо: $\angle (B_4C_5, PC_5) = \varphi$.

Аналогічно (циклічно перестановкою) одержимо, що $\varphi = \angle (B_4A_5, PA_5) = \varphi$. Ці співвідношення доводять, що точки $P$, $B_4$, $C_5$, $A_5$. Аналогічно, циклічними є такі четвірки точок $P$, $C_4$, $A_5$, $B_5$ та $P$, $A_4$, $B_5$, $C_5$. Звідси маємо:
```math
\angle (A_5C_5, C_5B_5) = \angle (A_5B_5, PB_5) + \angle (PB_5, C_5B_5) = \angle (A_5C_4, PC_4) + \angle (PA_4, C_5A_4). \tag{5}
```
З іншого боку, точки $A_2$, $B_2$, $C_2$, $A_4$, $B_4$, $C_4$ лежать на колі $(ABC)$, тому ми маємо:
```math
\angle (A_2B_2, C_2B_2) = \angle (A_2B_2, B_4B_2) + \angle (B_4B_2, C_2B_2) = \angle (A_2A_4, B_4A_4) + \angle (B_4C_4, C_2C_4). \tag{6}
```

Але прямі $A_2A_4$, $B_4A_4$, $B_4C_4$, $C_4C_2$ співпадають відповідно з прямими $PA_4$, $C_5A_4$, $A_5C_4$, $PC_4$. Суми правих частин рівностей (5) та (6) однакові, тому рівні і їх ліві частини, тому $\angle (A_5B_5, C_5B_5) = \angle (A_2B_2, C_2B_2)$, аналогічно $\angle (B_5C_5, A_5C_5) = \angle (B_2C_2, A_2C_2)$ і $\angle (C_5A_5, B_5A_5) = \angle (C_2A_2, B_2A_2)$. Це означає, що відповідні кути у трикутників $A_5B_5C_5$ та $A_2B_2C_2$ рівні, що й означає їх подібність.

_**Зауваження 1.**_ Спроби розв’язати цю задачу методами класичної геометрії, які не спираються на орієнтовні кути, натрапляють на складнощі, які пов’язані з тим, що повне розв’язання цієї задачі вимагає перегляду багатьох випадків. Розташування важливих точок можливе багатьма варіантами. Кути, що були рівними в одному випадку стануть доповнюючими ми в іншому.

_**Зауваження 2.**_ Той факт, що кола $(AB_1C_1)$, $(A_1BC_1)$, $(A_1B_1C)$ мають спільну точку не потребує доведення, оскільки це відома теорема Мікельса (Miquel’s theorem).
</details>

# 4 тур
## 10
Для яких натуральних $n$ гострокутний трикутник $ABC$ з кутом $\angle BAC < 45^\circ$ можна розбити на $n$ вписаних чотирикутників таких, що радіуси описаних навколо них кіл утворюють геометричну прогресію?

## 11
Є $n \geq 2$ ламп $L_1, \ldots, L_n$, розташованих в ряд, кожна з яких може бути в одному з двох станів – "*вкл*" або "*викл*". Кожної секунди лампи одночасно змінюють свій стан за такими правилами:
- якщо лампа $L_i$ та її сусіди (при $i = 1, i = n$ лампа має рівно одного сусіда, при інших – двох) знаходяться в однаковому стані, то вона приймає стан "*викл*";
- інакше вона приймає стан "*вкл*".

В початковому положенні усі лампи знаходяться в стані "*викл*", окрім лівої лампи, яка має стан "*вкл*".
1. Довести, що існує нескінченно багато таких натуральних $n$, для яких усі лампи будуть в одному з станів "*викл*".
2. Довести, що існує нескінченно багато таких натуральних $n$, для яких лампи не будуть усі одночасно в положенні "*викл*" ні в який момент часу.

<details><summary>Розв'язання</summary>

1. Перевіряючи це для малих $n$ можна припустити, що для кожного $n = 2^k$ все буде як потрібно. Більш точно, нехай $A_k$ – матриця $2^k \times 2^k$, чиї рядки представляють «еволюцію» системи ламп. Вони містять 0 і 1 відповідно для стану «викл» та «вкл». Верхній рядок має вигляд $(1, 0, 0, 0, \ldots, 0)$, нижній ряд – стан після $(2^k - 1)$ кроків. Ми стверджуємо, що нижній рядок буде мати вигляд $(1, 1, 1, \ldots, 1)$. Цього достатньо, щоб після наступного кроку усі наступні стани мали вигляд  $(0, 0, 0, \ldots, 0)$.
    
    Доведення проведемо індукцією по $k$. Випадок $k = 1$ – очевидний. Припустимо, що для деякого $k$ твердження вірне, запишемо матрицю $A_{k+1}$ у такому вигляді: $\begin{pmatrix} A_k & O_k \\ B_k & C_k \end{pmatrix}$. Після $m$ кроків остання 1 займає позицію $(m + 1)$. Таким чином $O_k$ – нульова матриця. Тому за припущенням індукції нижні рядки матриць $(A_k, O_k)$ має вигляд $(1, 1, \ldots, 1, 0, 0, \ldots, 0)$ (по $2^k$ нулів та одиниць). Наступний рядок, таким чином, буде мати вигляд: $(\underbrace{0, 0, \ldots, 0}_{2^k-1}, 1, 1, \underbrace{0, 0, \ldots, 0}_{2^k-1})$ – симетрично відносно середини, а тому й всі подальші рядки також будуть симетричними. Таким чином, знаючи матрицю $B_k$, ми знаємо й матрицю $C_k$, тому для подальшого дослідження нам достатньо знайти поведінку лише матриці $B_k$, на яку впливає стовпець ряд матриці $C_k$. Уявимо собі матрицю $C_k$, ізольованою від інших частин матриці $A_{k+1}$. Припустимо, що цей змінюється так, як зазначено в умові. Перший елемент рядка визначається лише двома першими елементами попереднього рядку, відповідно до того, вони співпадають чи ні. Тепер помістимо $C_k$ знову в $A_{k+1}$. Самий лівий знак рядку $C_k$ вже має двох сусідів, але лівий сусід є його копією. Тому зміна в матриці $C_k$ не змінюється від того, вона ізольована чи ні. Оскільки перший рядок матриці $C_k$ співпадає з першим рядком матриці $A_k$, то й останні рядки також співпадають, а тому останній рядок $C_k$ буде з самих одиниць, а й матриці $B_k$, яка симетрична до $C_k$. Таким чином індукційний перехід завершено, з ним і весь пункт 1 доведено.

2. Існує багато потрібних прикладів. Наприклад, $n = 2^k + 1$. Перетворення системи станів ламп можна подати матрицею, що має $2^k + 1$ стовпчиків. Верхні $2^k$ рядків цієї матриці вже обговорювалися вище, оскільки останній елемент (самий правий) не впливає на поведінку решти елементів, оскільки поруч з ним також нуль, лише в останній момент, коли там з'являється 1 ми бачимо, як він впливає на передостанній елемент.
    
    Таким чином ми маємо такий ряд – $(0, 0, \ldots, 0, 1, 1)$. Але це є другий ряд матриці зі зміненою на протилежну орієнтацію. Оскільки ця ситуація вже була, то вона й далі буде періодично повторюватись, таким чином стану, де усі лампи «викл» не буде.
</details>

## 12
Довести, що існує нескінченно багато таких натуральних $n$, що усі прості дільники числа $(n^2 + n + 1)$ не перевищують $\sqrt{n}$.

<details><summary>Розв'язання</summary>

Покладемо спочатку $n = k^2$. Маємо $k^4 + k^2 + 1 = (k^2 - k + 1)(k^2 + k + 1)$. Далі візьмемо $k = t^2$, отримаємо $(t^2 - t + 1)(t^2 + t + 1)(t^4 - t^2 + 1)$. Зрозуміло, що усі прості дільники числа $(t^2 - t + 1)$ менші за $t^2$. Розглянемо множник $(t^4 - t^2 + 1) = (t^2 + 3)^2 - (7t^2 + 8)$. Існує нескінченно багато $t$ таких, що $7t^2 + 8 = x^2$, тобто
```math
x^2 - 7t^2 = 8. \tag{1}
```
Це рівняння Пелля, і воно має розв'язок $x = 6$, $t = 2$. Тоді $(t^2 + 3)^2 - (7t^2 + 8) = (t^2+3-x)(t^2+3+x)$. Потрібно, щоб усі прості дільники числа $(t^2 + 3 - x)$ і $(t^2 + t + 1)$ були менші $t^2$.

Помітимо, що загальна серія розв'язків рівняння (1) має вигляд $\begin{cases} x_{n+1} = 8x_n + 21t_n \\ t_{n+1} = 3x_n + 8t_n \end{cases}$. Треба розглядати дільники числа $(t_n^2 + t_n + 1)$ і $(t_n^2 + x_n + 3)$. Оскільки перетворення $\begin{pmatrix} 8 & 21 \\ 3 & 8 \end{pmatrix}$ не вироджене в $\mathbb{Z}_p$, де $p$ - просте, то послідовність остач $(x_n, t_n)$ за довільним модулем $p$ є суто періодичною.

$x_1 = 6$, $t_1 = 2$, $t_1^2 + x_1^3 = 13$. Тоді $\exists T \in  \mathbb{N}$, що $(x_{Tk+1} + t_{Tk+1}^2 + 3) \mathop{\raisebox{-2pt}{\vdots}} 13$, $k \in \mathbb{N}$, $T$ - період. Аналогічно $t_1^2 + t_1 + 1 = 7$, тому $\exists T_1$, $(t_{T_1k+1} + t_{T_1k+1}^2 + 1) \mathop{\raisebox{-2pt}{\vdots}} 7$. Далі вибираємо $n = TT_1k + 1$.
</details>